@import 'tailwindcss/base';
@import 'tailwindcss/components';
@import 'tailwindcss/utilities';

/* Base & Typography */
body {
    @apply bg-bg-main text-text-main font-sans overflow-x-hidden;
    background: radial-gradient(circle at 12% 10%, rgba(109, 186, 198, 0.14), transparent 36%),
        radial-gradient(circle at 90% 8%, rgba(120, 114, 184, 0.14), transparent 30%),   
        linear-gradient(180deg, #0f1524 0%, #0f1524 100%);
    scrollbar-width: none; /* Firefox */
}

body::-webkit-scrollbar {
    display: none; /* Chrome, Safari */
}

body.player-open {
    @apply overflow-hidden;
}

/* Horizontal Scroll Container */
.scroll-container {
    @apply relative w-full;
    height: 500vh; /* Determines the scroll length */
}

.sticky-wrapper {
    @apply sticky top-0 h-screen w-full overflow-hidden flex flex-col justify-center;
    background: #0f1524; /* Solid background to prevent transparency glitch at start */
    /* If you want gradient: background: linear-gradient(180deg, #0f1524 0%, #0f1524 100%); */
}

/* Horizontal Track */
.horizontal-track {
    @apply relative flex items-center gap-[10vw] px-[10vw] will-change-transform;
    width: max-content;
}

.episodes-track-progress {
    @apply absolute top-1/2 -translate-y-1/2 h-px pointer-events-none z-0;
}

.episodes-track-progress-line {
    @apply absolute inset-0 bg-white/10;
}

.episodes-track-progress-fill {
    @apply absolute left-0 top-0 h-full bg-primary w-0;
    box-shadow: 0 0 15px rgba(88, 199, 214, 0.8);
}

/* Timeline */
.timeline-container {
    @apply fixed left-0 right-0 top-1/2 -translate-y-1/2 h-0.5 w-full -z-10 pointer-events-none;
}

.timeline-line {
    @apply absolute left-0 top-0 h-full w-full bg-border opacity-30;
}

.timeline-fill {
    @apply absolute left-0 top-0 h-full bg-primary origin-left scale-x-0 transition-transform duration-100 ease-linear;
    box-shadow: 0 0 15px var(--color-primary);
}

/* Episode Card */
.episode-card {
    @apply relative flex-shrink-0 w-[90vw] md:w-[80vw] lg:w-[70vw] aspect-video 
           bg-bg-card border border-border rounded-3xl overflow-hidden shadow-2xl 
           transition-all duration-500 ease-out transform;
    scroll-snap-align: center;
    z-index: 1;
}

.episode-card.active {
    @apply border-white/25 scale-[1.01] shadow-xl;
    z-index: 2;
}

.episode-card:hover {
    @apply border-primary scale-[1.03] -translate-y-1.5;
    box-shadow: 0 30px 70px rgba(4, 10, 24, 0.65), 0 0 34px rgba(88, 199, 214, 0.18);
}

.episode-card:focus-visible {
    @apply outline outline-2 outline-offset-2 outline-primary;
}

.card-image-wrapper {
    @apply relative w-full h-full overflow-hidden;
}

.card-image {
    @apply w-full h-full object-cover transition-transform duration-700;
}

.episode-card:hover .card-image {
    @apply scale-110;
}

.card-image-wrapper::after {
    content: '';
    @apply absolute inset-0 opacity-0 transition-opacity duration-500;
    background: linear-gradient(180deg, rgba(4, 10, 24, 0.05), rgba(4, 10, 24, 0.56));
}

.episode-card:hover .card-image-wrapper::after {
    @apply opacity-100;
}

.card-content {
    @apply absolute bottom-0 left-0 w-full p-8 md:p-12 bg-gradient-to-t from-black via-black/80 to-transparent;
}

.card-play-overlay {
    @apply absolute inset-0 opacity-0 transition-all duration-300 flex items-center justify-center backdrop-blur-[1px];
    background: linear-gradient(180deg, rgba(6, 15, 30, 0.08), rgba(6, 15, 30, 0.48));
}

.episode-card:hover .card-play-overlay,
.episode-card:focus-within .card-play-overlay {
    @apply opacity-100;
}

.card-play-btn {
    @apply w-20 h-20 md:w-24 md:h-24 rounded-full bg-primary text-slate-900 flex items-center justify-center
           transform scale-90 transition-transform duration-300;
    box-shadow: 0 0 30px rgba(88, 199, 214, 0.45);
}

.episode-card:hover .card-play-btn,
.episode-card:focus-within .card-play-btn {
    @apply scale-100;
}

.episode-number {
    @apply inline-block px-4 py-1.5 mb-3 text-sm font-bold text-primary bg-primary-soft rounded-full uppercase tracking-wider backdrop-blur-sm border border-primary-soft;
}

.episode-title {
    @apply text-3xl md:text-5xl font-bold leading-tight mb-4 text-white drop-shadow-lg;
}

.episode-meta {
    @apply flex items-center gap-6 text-base md:text-lg text-gray-300 mt-4 font-medium;
}

/* Audio Wave Animation under active card */
.audio-wave {
    @apply absolute -bottom-12 left-1/2 -translate-x-1/2 flex items-end gap-1 h-8 opacity-0 transition-opacity duration-300;
}

.episode-card.active .audio-wave {
    @apply opacity-100;
}

.wave-bar {
    @apply w-1 bg-primary rounded-t-full animate-equalize;
}

.wave-bar:nth-child(1) { animation-delay: 0.0s; height: 40%; }
.wave-bar:nth-child(2) { animation-delay: 0.1s; height: 70%; }
.wave-bar:nth-child(3) { animation-delay: 0.2s; height: 100%; }
.wave-bar:nth-child(4) { animation-delay: 0.3s; height: 60%; }
.wave-bar:nth-child(5) { animation-delay: 0.15s; height: 80%; }

/* Player Modal */
.player-modal {
    @apply fixed inset-0 z-50 flex items-center justify-center bg-slate-900/95 backdrop-blur-xl opacity-0 pointer-events-none transition-all duration-300;
}

.player-modal.open {
    @apply opacity-100 pointer-events-auto;
}

.player-content {
    @apply relative w-[90vw] max-w-5xl bg-bg-card border border-border rounded-2xl overflow-hidden shadow-2xl flex flex-col md:flex-row;
    max-height: 90vh;
}

.player-video {
    @apply w-full md:w-2/3 aspect-video bg-black;
}

.player-controls {
    @apply w-full md:w-1/3 p-6 flex flex-col justify-between border-l border-border;
}

.close-btn {
    @apply absolute top-4 right-4 z-10 w-10 h-10 flex items-center justify-center rounded-full bg-black/50 hover:bg-black/70 text-white backdrop-blur transition-colors;
}

.play-mode-toggle {
    @apply flex gap-2 p-1 bg-slate-800 rounded-lg mb-6;
}

.mode-btn {
    @apply flex-1 py-2 text-sm font-semibold text-center rounded-md transition-colors text-text-muted hover:text-white;
}

.mode-btn.active {
    @apply bg-primary text-slate-900 shadow-sm;
}

/* Layout Utilities */
.section-header-large {
    @apply absolute top-[10vh] left-[10vw] z-10 max-w-md;
}

.section-title-large {
    @apply text-5xl md:text-7xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-text-secondary;
}

.scrolldown-hint {
    @apply absolute bottom-8 left-1/2 -translate-x-1/2 text-text-muted text-sm animate-bounce;
}

#scroll-hint.is-dismissed {
    @apply opacity-0 pointer-events-none;
    transition: opacity 0.2s ease;
}

#player-modal.modal-open {
    @apply opacity-100 pointer-events-auto;
}

#player-modal #close-player {
    @apply bg-black/30 backdrop-blur-sm border border-white/10;
}

#player-modal #close-player:hover {
    @apply border-white/25;
}

#player-modal #youtube-player-container {
    @apply bg-black transition-all duration-300;
}

#player-modal #youtube-player-container iframe {
    @apply w-full h-full;
    pointer-events: none;
}

#player-modal #youtube-player-container.audio-hidden {
    @apply opacity-0 invisible;
}

#player-shell {
    @apply mt-3;
}

#player-stage:fullscreen,
#player-stage:-webkit-full-screen {
    @apply w-screen h-screen;
}

#player-stage:fullscreen .player-controls-panel,
#player-stage:-webkit-full-screen .player-controls-panel {
    @apply max-w-[min(92vw,920px)];
}

#player-stage.is-audio-mode {
    background: radial-gradient(circle at 50% 35%, rgba(88, 199, 214, 0.16), rgba(15, 21, 36, 0.92));
}

#player-modal #audio-visualizer {
    background: radial-gradient(circle at 50% 45%, rgba(88, 199, 214, 0.2), transparent 58%),
        linear-gradient(135deg, rgba(15, 21, 36, 0.92), rgba(16, 32, 56, 0.9));
}

.player-sidebar {
    @apply space-y-5;
}

.player-description {
    @apply text-sm md:text-base text-white/70 p-4 rounded-xl bg-black/20 border border-white/10;
    max-height: 9.5rem;
    overflow: auto;
}

.player-controls-panel {
    @apply absolute left-1/2 -translate-x-1/2 bottom-3 z-20 w-[min(94%,820px)] p-2.5 rounded-xl border border-white/10 bg-slate-950/80 backdrop-blur-md space-y-2;
}

.player-seek-wrap {
    @apply space-y-1;
}

.player-time-row {
    @apply flex items-center justify-between text-[11px] text-white/60 font-medium;
}

#player-seek,
#player-volume {
    @apply w-full;
    -webkit-appearance: none;
    appearance: none;
    height: 3px;
    border-radius: 999px;
    background: rgba(255, 255, 255, 0.22);
}

#player-seek::-webkit-slider-thumb,
#player-volume::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 12px;
    height: 12px;
    border-radius: 999px;
    background: rgba(88, 199, 214, 1);
    border: 0;
}

#player-seek::-moz-range-thumb,
#player-volume::-moz-range-thumb {
    width: 12px;
    height: 12px;
    border-radius: 999px;
    background: rgba(88, 199, 214, 1);
    border: 0;
}

.player-controls-row {
    @apply flex items-center justify-between gap-3;
}

.player-left-controls,
.player-right-controls {
    @apply flex items-center gap-2;
}

.player-right-controls {
    @apply min-w-0;
}

.icon-btn {
    @apply h-8 min-w-8 px-2 rounded-lg border border-white/15 bg-white/5 text-white text-xs font-semibold flex items-center justify-center transition-colors;
}

.icon-btn:hover {
    @apply bg-white/10 border-white/25;
}

.icon-btn-primary {
    @apply bg-primary text-slate-900 border-primary;
}

.icon-btn-primary:hover {
    @apply bg-primary;
    filter: brightness(1.06);
}

.player-state-label {
    @apply text-[11px] text-white/60 font-medium tracking-wide;
}

#player-mute,
#player-speed,
#player-fullscreen {
    @apply h-8 px-2.5 rounded-lg border border-white/10 bg-white/5 text-white text-xs font-semibold;
}

#player-speed {
    @apply pr-6;
}

#player-volume {
    @apply w-20 md:w-24;
}

.audio-cover-wrap {
    box-shadow: 0 30px 55px rgba(2, 6, 17, 0.7), 0 0 26px rgba(88, 199, 214, 0.22);
}

#mode-video,
#mode-audio {
    @apply transition-all duration-200;
}

.episode-comments {
    @apply mt-6 rounded-2xl border border-white/10 bg-black/25 p-4 md:p-5;
}

.comments-head {
    @apply flex items-center justify-between gap-3 mb-3 pb-2 border-b border-white/10;
}

.comments-title {
    @apply text-sm font-semibold text-white;
}

.comments-count {
    @apply text-xs font-semibold text-primary bg-primary-soft border border-primary-soft rounded-full px-2 py-0.5;
}

.comments-status {
    @apply text-xs text-white/60 mb-2 min-h-[1rem];
}

.comments-list {
    @apply space-y-2.5 max-h-64 overflow-y-auto pr-1;
}

.comment-item {
    @apply rounded-xl border border-white/10 bg-white/5 p-3.5;
}

.comment-item-head {
    @apply flex flex-col items-start gap-2 mb-1.5 sm:flex-row sm:items-center sm:justify-between;
}

.comment-item-meta {
    @apply min-w-0 flex-1;
}

.comment-item-actions {
    @apply flex items-center gap-1.5 self-end sm:self-auto;
}

.comment-action-btn {
    @apply h-7 min-w-[72px] px-2.5 py-1 rounded-md text-[11px] font-semibold border border-white/10 bg-white/5 text-white/80 transition-all inline-flex items-center justify-center;
}

.comment-action-btn:hover {
    @apply text-white bg-white/10 border-white/20;
}

.comment-action-btn:disabled {
    @apply opacity-60 cursor-not-allowed;
}

.comment-action-btn-danger {
    @apply text-red-200 border-red-400/30 bg-red-500/10;
}

.comment-action-btn-danger:hover {
    @apply text-red-100 border-red-300/40 bg-red-500/20;
}

.comment-author {
    @apply text-xs font-semibold text-white;
}

.comment-time {
    @apply text-[11px] text-white/50;
}

.comment-body {
    @apply text-sm text-white/80 leading-relaxed break-words pt-0.5;
}

.comment-form {
    @apply mt-4 space-y-2.5 pt-3 border-t border-white/10;
}

.comment-label {
    @apply block text-xs font-medium text-white/70;
}

.comment-input {
    @apply w-full min-h-[96px] rounded-xl border border-white/10 bg-white/5 text-sm text-white px-3 py-2.5 placeholder:text-white/40 focus:outline-none focus:border-primary;
    resize: vertical;
}

.comment-form-row {
    @apply flex flex-col items-start gap-2.5 sm:flex-row sm:items-center sm:justify-between;
}

.comment-auth-note {
    @apply text-[11px] text-white/50 leading-snug;
}

.comment-submit {
    @apply h-9 px-4 py-1.5 rounded-lg bg-primary text-slate-900 text-xs font-semibold transition-all inline-flex items-center justify-center;
}

.comment-submit:disabled {
    @apply opacity-60 cursor-not-allowed;
}
